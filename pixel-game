<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Pixel Game</title>
    <script>

        const normalizePixelToParent = function() {
            // Take a coordinate location
            // take the parent, and get relative coordinatess
        }

        let pixel = {
            location: [0, 0],
            generatePixel: function (field) {
                let axeX, axeY;

                do {
                    axeX = Math.floor(Math.random() * field.offsetWidth);
                } while (axeX < 15 || axeX > field.offsetWidth - 4);

                do {
                    axeY = Math.floor(Math.random() * field.offsetHeight);
                } while (axeY < 15 || axeY > field.offsetHeight - 4);

                let newLocation = [];
                newLocation.push(axeX);
                newLocation.push(axeY);

                this.location = newLocation;
            }
        }

        window.onload = init;

        function init() {
            let playground = document.getElementById("playground");
            playground.style.width = '55vw';
            playground.style.height = '35vw';
            playground.onmousemove = showCoords;

            pixel.generatePixel(playground);
            let tp = createPixelObject(pixel.location[0], pixel.location[1]);

            console.log(playground.offsetWidth);
            console.log(playground.offsetHeight);
            console.log(pixel.location);
            console.log(pixel.location[0]);
            console.log(tp);
        }

        function showCoords(eventObj) {
            let playground = document.getElementById("coords");
            let x = eventObj.pageX;
            let y = eventObj.pageY;
            playground.innerHTML = "Coordinates: "
                + x + ", " + y;
        }

        function createPixelObject(coordinateX, coordinateY) {
            let field = document.getElementById("playground");
            let pixelObject = document.createElement("div");
            field.appendChild(pixelObject);
            pixelObject.style.position = "absolute";
            pixelObject.style.width = "5px";
            pixelObject.style.height = "5px";
            pixelObject.style.left = coordinateX + "px";
            pixelObject.style.top = coordinateY + "px";
            pixelObject.style.background = "#ff0000";
            pixelObject.style.boxShadow = "0px 0px 20px 10px #ff0000";

            return pixelObject;
        }

        function calculateDistance(targetPixel, currentPosition) {

        }

        document.addEventListener("mousemove", function(e) {
            let field = document.getElementById("playground");
            let trace = document.createElement("div");
            
            let x = e.pageX;
            let y = e.pageY;

            trace.style.left = x + "px";
            trace.style.top = y + "px";
            trace.style.position = "absolute";
            trace.style.width = "2px";
            trace.style.height = "2px";
            trace.style.background = "#5640d6";
            trace.style.boxShadow = "0px 0px 50px 5px #5640d6";

            if (field.offsetLeft < x && x < field.offsetWidth && field.offsetTop < y && y < field.offsetHeight) {
                let tracePoint = field.appendChild(trace);
            }

        })

    </script>
</head>

<body>
    <div id="playground" style="border: solid 1px #000;"></div>
    <span id="coords">Move the mouse to find a pixel</span>
</body>

</html>